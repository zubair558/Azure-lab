
---

# Azure Cloud Detection Lab Project

**Introduction:**
In the cybersecurity realm, detecting and analyzing anomalous activities is vital to prevent network compromises. This lab focuses on using Azure Sentinel, a Security Information and Event Management System (SIEM), to monitor, analyze, and respond to potential threats in real-time.

**Lab Objectives:**

- **Setting Up Azure Resources:**
  - Create a free Azure account.
  - Create a Resource Group to organize lab resources.
  - Deploy a Windows 10 Virtual Machine (VM) on Azure.
  - Implement network security best practices using Network Security Groups (NSG) and Just in Time Access.

- **Utilizing Azure Sentinel:**
  - Configure a Log Analytics Workspace to store log data.
  - Deploy Azure Sentinel for security analytics, threat intelligence, and response.
  - Utilize Data Connectors to bring data from Windows VM into Sentinel.
  - Understand and explore Windows Security Event logs.

- **Querying Logs with Kusto Query Language (KQL):**
  - Learn KQL basics to query logs effectively.
  - Extract specific security events using KQL.

- **Creating Analytic Rules:**
  - Write custom analytic rules to detect security events.
  - Monitor for scheduled task creations and trigger alerts.
  - Investigate alerts generated by the system.

- **MITRE ATT&CK Framework:**
  - Understand MITRE ATT&CK tactics and techniques.
  - Explore Persistence techniques (T1053.005) using scheduled tasks.
  - Learn about detection and mitigation strategies based on MITRE recommendations.

**Getting Started:**
1. **Create a Free Azure Account:**
   - Sign up for a free Azure account: [Azure Free Account](https://azure.microsoft.com/en-us/free/).

2. **Setting Up Lab Resources:**
   - Create a Resource Group in Azure.
   - Deploy a Windows 10 VM with necessary security settings.
   - Enable Just in Time Access for enhanced security.
  
     ![Creating Vm](https://github.com/zubair558/Azure-lab/assets/139615492/141aeeae-bc13-410f-996f-96556a30449a)


3. **Utilizing Azure Sentinel:**
   - Create a Log Analytics Workspace.
   - Deploy Azure Sentinel and configure data connectors.
   - Generate security events on the Windows VM.

     ![Creating Log Analystics](https://github.com/zubair558/Azure-lab/assets/139615492/c4c80c92-4d66-4992-bb0f-1c16f4b795e7)

     ![Log Analystics](https://github.com/zubair558/Azure-lab/assets/139615492/0666a150-548e-42b5-aaac-39c3196da288)


4. **Querying Logs with KQL:**
   - Use Kusto Query Language (KQL) to extract specific security events.
   - Explore the Sentinel interface for querying logs.
  
     ![Kusto Query Language](https://github.com/zubair558/Azure-lab/assets/139615492/0c31964c-300c-4f69-9195-846b3c3f7d88)


5. **Creating Analytic Rules:**
   - Write KQL logic for custom analytic rules.
   - Create a scheduled task in Windows VM to trigger an alert.
   - Monitor and investigate alerts generated by the system.
    

6. **MITRE ATT&CK Framework:**
   - Understand MITRE ATT&CK tactics and techniques related to persistence.
   - Implement detection and mitigation strategies based on MITRE recommendations.

